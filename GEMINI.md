# GEMINI.md

This file provides guidance to Gemini when working with code in this repository.

## Project Overview

Explico Learning is a Google Apps Script-based interactive walkthrough editor that allows users to create hotspot-enabled presentations with background media (images, videos, YouTube). The app features a project dashboard and hotspot editor with real-time preview capabilities, all persisted to Google Sheets.

**Live URLs:**
- Web App: https://script.google.com/macros/s/AKfycbw9ZicNfjF7nSt_lCpYoI3MXEi_McVLAW3dzBClcTVz-QgsJ_nPDTRsQA0ELCK5fyde/exec
- Apps Script Editor: https://script.google.com/d/1YiQsdE97f3dM50Y26dgjqPUCjIIbMGWX5U2yVha8fu1264DtIj0VJWh_/edit

## Development Commands

### Deployment
```bash
# Push code changes to Google Apps Script
clasp push --force

# Deploy new version
clasp deploy --description "Version description"

# View deployments
clasp deployments

# Open Apps Script editor
clasp open
```

### File Structure
- `dist/` - Built files ready for deployment (generated by build.sh)
- `services/` - Service classes and UI components (Google Apps Script)
- `templates/` - HTML templates and UI pages
- `appsscript.json` - Google Apps Script project configuration
- `.clasp.json` - Deployment configuration (script ID, root dir)

## Architecture

### Service-Oriented Architecture
The application follows a service-oriented pattern with clear separation of concerns:

**Core Services (`services/`):**
- `ProjectManager.js` - Master orchestrator, coordinates all services and manages project lifecycle
- `HotspotManager.js` - Manages hotspot CRUD operations and real-time synchronization
- `EventTypeHandlers.js` - Handles different hotspot event types (text popup, pan/zoom, spotlight)
- `MediaHandler.js` - Processes background media (images, videos, YouTube URLs)  
- `GoogleSheetsAPI.js` - Data persistence layer with Google Sheets integration

### Data Storage Structure
Each project creates a Google Spreadsheet with sheets:
- **Projects** - Project metadata, settings, analytics
- **Slides** - Slide data, media URLs, ordering  
- **Hotspots** - Complete hotspot configurations with positioning and events
- **Analytics** - User interaction tracking and metrics

### Page Routing
The main `Code.gs` file handles web app routing:
- `/exec` (default) → `project-dashboard.html` - Project management interface
- `/exec?page=editor&project={id}` → `hotspot-editor.html` - Hotspot creation/editing

## Development Guidelines

### Adding New Hotspot Event Types
1. Add event type constant to `EVENT_TYPES` in `constants.gs`
2. Implement handler in `EventTypeHandlers.gs`
3. Add configuration form controls in `ConfigPanel.gs`
4. Update hotspot rendering in `HotspotRenderer.gs`
5. Test with real-time preview in editor

### Google Sheets Integration
- Each project gets its own spreadsheet for data isolation
- Use batch operations in `GoogleSheetsAPI.gs` for performance
- Column mappings defined in `SHEETS_CONFIG` constants
- Relationship integrity maintained through service layer

## Deployment Notes

- Use `clasp push --force` to overwrite remote files
- Deploy new versions with descriptive messages
- Test deployed webapp after each deployment
- Monitor Google Apps Script execution logs for errors
