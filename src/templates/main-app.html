<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explico Learning - Projects</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’¡</text></svg>">

    <!-- Meta tags for SEO and social sharing -->
    <meta name="description" content="Create interactive walkthrough presentations with hotspots and media">
    <meta name="keywords" content="interactive, presentation, walkthrough, hotspots, education, explico">
    <meta name="author" content="Explico Learning">

    <!-- Open Graph meta tags -->
    <meta property="og:title" content="Explico Learning - Interactive Presentations">
    <meta property="og:description" content="Create interactive walkthrough presentations with hotspots and media">
    <meta property="og:type" content="website">

    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Main app styles will be injected by webpack -->
    <style>
        /* Critical CSS for loading state */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }

        .initial-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            gap: 20px;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: #6c757d;
            font-size: 16px;
        }

        /* Hide initial loading when React takes over */
        .app-loaded .initial-loading {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Initial loading state -->
    <div class="initial-loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading Explico Learning...</div>
    </div>

    <!-- React app will mount here -->
    <div id="app-root"></div>

    <!-- Error fallback -->
    <div id="error-fallback" style="display: none; padding: 40px; text-align: center; color: #721c24; background: #f8d7da; margin: 20px; border-radius: 4px;">
        <h2>ðŸš« Application Error</h2>
        <p>Something went wrong loading the application.</p>
        <button onclick="window.location.reload()" style="padding: 8px 16px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Reload Page
        </button>
    </div>

    <!-- Google Apps Script API -->
    <script>
        // Initialize Google Apps Script client library
        window.addEventListener('error', function(e) {
            console.error('Application error:', e.error);
            document.getElementById('error-fallback').style.display = 'block';
            document.querySelector('.initial-loading').style.display = 'none';
        });

        // Hide loading screen when app is ready
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                if (document.getElementById('app-root').children.length > 0) {
                    document.body.classList.add('app-loaded');
                }
            }, 100);
        });

        // Google Apps Script ready handler
        function onGASReady() {
            console.log('Google Apps Script client library loaded');
        }

        // Fallback if GAS library doesn't load
        setTimeout(function() {
            if (!window.google || !window.google.script) {
                console.warn('Google Apps Script library not available, using fallback');
                window.google = {
                    script: {
                        run: {
                            withSuccessHandler: function(callback) {
                                return {
                                    withFailureHandler: function(errorCallback) {
                                        return {
                                            getProjects: function() {
                                                // Fallback for development
                                                callback([{
                                                    id: 'sample-project-1',
                                                    title: 'Sample Project',
                                                    description: 'This is a sample project for development',
                                                    createdAt: new Date(),
                                                    updatedAt: new Date(),
                                                    spreadsheetId: 'sample-spreadsheet-id',
                                                    settings: {
                                                        autoSave: true,
                                                        version: '1.0.0',
                                                        theme: 'light',
                                                        analytics: true
                                                    }
                                                }]);
                                            },
                                            createProject: function(title, description) {
                                                // Fallback for development
                                                callback({
                                                    id: 'proj_' + Date.now(),
                                                    title: title,
                                                    description: description,
                                                    createdAt: new Date(),
                                                    updatedAt: new Date(),
                                                    spreadsheetId: 'dev-spreadsheet-' + Date.now(),
                                                    settings: {
                                                        autoSave: true,
                                                        version: '1.0.0',
                                                        theme: 'light',
                                                        analytics: true
                                                    }
                                                });
                                            },
                                            deleteProject: function(id) {
                                                // Fallback for development
                                                callback();
                                            },
                                            getProjectData: function(projectId) {
                                                // Fallback for development
                                                callback({
                                                    project: {
                                                        id: projectId,
                                                        title: 'Sample Project',
                                                        description: 'Sample project for testing',
                                                        createdAt: new Date(),
                                                        updatedAt: new Date(),
                                                        spreadsheetId: 'sample-spreadsheet',
                                                        settings: {
                                                            autoSave: true,
                                                            version: '1.0.0',
                                                            theme: 'light',
                                                            analytics: true
                                                        }
                                                    },
                                                    slides: [{
                                                        id: 'slide-1',
                                                        projectId: projectId,
                                                        title: 'Sample Slide',
                                                        mediaType: 'image',
                                                        mediaUrl: 'https://via.placeholder.com/800x600/007bff/ffffff?text=Sample+Image',
                                                        order: 0,
                                                        transition: 'fade'
                                                    }],
                                                    hotspots: []
                                                });
                                            },
                                            saveHotspots: function(projectId, hotspots) {
                                                // Fallback for development
                                                console.log('Saving hotspots for project:', projectId, hotspots);
                                                callback();
                                            },
                                            saveSlides: function(projectId, slides) {
                                                // Fallback for development
                                                console.log('Saving slides for project:', projectId, slides);
                                                callback();
                                            }
                                        };
                                    }
                                };
                            }
                        }
                    }
                };
            }
        }, 2000);
    </script>

    <!-- Main app bundle will be injected by webpack -->
</body>
</html>